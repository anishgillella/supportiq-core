(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},70065,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(46932),a=e.i(47163);let s=(0,r.forwardRef)(({className:e,children:r,...s},n)=>(0,t.jsx)(i.motion.div,{ref:n,className:(0,a.cn)("rounded-2xl border border-border bg-bg-secondary p-6",e),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},...s,children:r}));s.displayName="Card";let n=({children:e,className:r})=>(0,t.jsx)("div",{className:(0,a.cn)("mb-6",r),children:e}),o=({children:e,className:r})=>(0,t.jsx)("h2",{className:(0,a.cn)("text-2xl font-semibold text-text-primary",r),children:e}),d=({children:e,className:r})=>(0,t.jsx)("p",{className:(0,a.cn)("mt-2 text-text-secondary",r),children:e}),l=({children:e,className:r})=>(0,t.jsx)("div",{className:(0,a.cn)("space-y-4",r),children:e}),c=({children:e,className:r})=>(0,t.jsx)("div",{className:(0,a.cn)("mt-6 flex items-center justify-between",r),children:e});e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>d,"CardFooter",()=>c,"CardHeader",()=>n,"CardTitle",()=>o])},67881,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(46932),a=e.i(47163);let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),n=(0,r.forwardRef)(({className:e,variant:r="primary",size:n="md",isLoading:o,children:d,disabled:l,...c},u)=>(0,t.jsxs)(i.motion.button,{ref:u,className:(0,a.cn)("relative inline-flex items-center justify-center font-medium rounded-xl transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2 focus-visible:ring-offset-bg-primary disabled:pointer-events-none disabled:opacity-50",{primary:"bg-accent-primary text-white hover:bg-accent-hover",secondary:"bg-bg-elevated text-text-primary border border-border hover:bg-bg-secondary hover:border-text-muted",ghost:"text-text-secondary hover:text-text-primary hover:bg-bg-elevated"}[r],{sm:"h-9 px-4 text-sm",md:"h-11 px-6 text-base",lg:"h-14 px-8 text-lg"}[n],e),disabled:l||o,whileHover:{scale:l||o?1:1.02},whileTap:{scale:l||o?1:.98},transition:{type:"spring",stiffness:400,damping:17},...c,children:[o&&(0,t.jsx)(s,{className:"mr-2 h-4 w-4 animate-spin"}),d]}));n.displayName="Button",e.s(["Button",()=>n],67881)},54858,e=>{"use strict";let t=new class{baseUrl;constructor(e){this.baseUrl=e}async request(e,t={}){let{token:r,...i}=t,a={"Content-Type":"application/json"};r&&(a.Authorization=`Bearer ${r}`);let s=await fetch(`${this.baseUrl}${e}`,{...i,headers:a});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"An error occurred"}))).detail||"An error occurred");return s.json()}async register(e,t){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getCurrentUser(e){return this.request("/auth/me",{token:e})}async getProgress(e){return this.request("/progress",{token:e})}async updateProgress(e,t){return this.request("/progress",{method:"PUT",token:e,body:JSON.stringify(t)})}async completeOnboarding(e){return this.request("/progress/complete",{method:"POST",token:e})}async getConfig(){return this.request("/admin/config")}async updateConfig(e){return this.request("/admin/config",{method:"PUT",body:JSON.stringify(e)})}async getAllUsers(){return this.request("/users")}}("http://localhost:8000/api/v1");e.s(["api",0,t])},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},18636,e=>{"use strict";var t=e.i(71645),r=e.i(54858);let i={page2:["aboutMe","address"],page3:["birthdate"]};function a(){let[e,a]=(0,t.useState)(i),[s,n]=(0,t.useState)(!0),[o,d]=(0,t.useState)(null);return(0,t.useEffect)(()=>{!async function(){try{let e=await r.api.getConfig();a({page2:e.page2,page3:e.page3})}catch(e){console.warn("Failed to fetch admin config, using defaults:",e),a(i)}finally{n(!1)}}()},[]),{config:e,isLoading:s,error:o,updateConfig:async e=>{d(null);try{return await r.api.updateConfig(e),a(e),!0}catch(e){return d(e instanceof Error?e.message:"Failed to update config"),!1}}}}e.s(["useAdminConfig",()=>a])},25917,57296,87226,e=>{"use strict";var t=e.i(43476),r=e.i(46932),i=e.i(71645),a=e.i(88653),s=e.i(47163),n=e.i(63209);let o=(0,i.forwardRef)(({className:e,label:o,error:d,maxLength:l,showCount:c=!0,value:u,...h},p)=>{let[m,y]=(0,i.useState)(!1),b="string"==typeof u?u.length:0;return(0,t.jsxs)(r.motion.div,{className:"space-y-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:[o&&(0,t.jsx)("label",{className:"block text-sm font-medium text-text-secondary",children:o}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.motion.div,{className:"absolute inset-0 rounded-xl pointer-events-none",animate:{boxShadow:m?"0 0 0 2px rgba(139, 92, 246, 0.3), 0 0 20px rgba(139, 92, 246, 0.1)":"none"},transition:{duration:.2}}),(0,t.jsx)("textarea",{ref:p,value:u,maxLength:l,className:(0,s.cn)("w-full px-4 py-3 rounded-xl min-h-[120px] resize-none","bg-bg-elevated border border-border","text-text-primary placeholder:text-text-muted","transition-all duration-200","focus:outline-none focus:border-accent-primary",d&&"border-error/50 focus:border-error",e),onFocus:()=>y(!0),onBlur:()=>y(!1),...h}),c&&l&&(0,t.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-text-muted",children:[(0,t.jsx)("span",{className:(0,s.cn)(b>.9*l&&"text-error"),children:b}),"/",l]})]}),(0,t.jsx)(a.AnimatePresence,{mode:"wait",children:d&&(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.2},className:"flex items-center gap-2 text-sm text-error",children:[(0,t.jsx)(n.AlertCircle,{className:"h-4 w-4"}),d]})})]})});function d({register:e,errors:i,value:a}){return(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,t.jsx)(o,{label:"Tell us about yourself",placeholder:"Share a bit about your background, role, and what you're hoping to achieve with SupportIQ...",error:i.aboutMe?.message,maxLength:500,showCount:!0,value:a,...e("aboutMe")})})}o.displayName="Textarea",e.s(["AboutMeField",()=>d],25917);var l=e.i(23750);function c({register:e,errors:i}){let a={hidden:{opacity:0,y:15},visible:{opacity:1,y:0}};return(0,t.jsxs)(r.motion.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},initial:"hidden",animate:"visible",className:"space-y-4",children:[(0,t.jsx)(r.motion.div,{variants:a,children:(0,t.jsx)(l.Input,{label:"Street address",placeholder:"123 Main Street",error:i.street?.message,...e("street")})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(r.motion.div,{variants:a,children:(0,t.jsx)(l.Input,{label:"City",placeholder:"San Francisco",error:i.city?.message,...e("city")})}),(0,t.jsx)(r.motion.div,{variants:a,children:(0,t.jsx)(l.Input,{label:"State",placeholder:"CA",error:i.state?.message,...e("state")})})]}),(0,t.jsx)(r.motion.div,{variants:a,children:(0,t.jsx)(l.Input,{label:"ZIP code",placeholder:"94102",error:i.zipCode?.message,...e("zipCode")})})]})}e.s(["AddressFields",()=>c],57296);var u=e.i(87316);let h=(0,i.forwardRef)(({label:e,error:o,value:d,onChange:l,className:c},h)=>{let[p,m]=(0,i.useState)(!1),y=new Date,b=new Date(y.getFullYear()-13,y.getMonth(),y.getDate()).toISOString().split("T")[0],x=new Date(y.getFullYear()-120,0,1).toISOString().split("T")[0];return(0,t.jsxs)(r.motion.div,{className:"space-y-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:[e&&(0,t.jsx)("label",{className:"block text-sm font-medium text-text-secondary",children:e}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.motion.div,{className:"absolute inset-0 rounded-xl pointer-events-none",animate:{boxShadow:p?"0 0 0 2px rgba(139, 92, 246, 0.3), 0 0 20px rgba(139, 92, 246, 0.1)":"none"},transition:{duration:.2}}),(0,t.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none",children:(0,t.jsx)(u.Calendar,{className:"h-5 w-5"})}),(0,t.jsx)("input",{ref:h,type:"date",value:d||"",onChange:e=>l?.(e.target.value),min:x,max:b,className:(0,s.cn)("w-full pl-12 pr-4 py-3 rounded-xl","bg-bg-elevated border border-border","text-text-primary","transition-all duration-200","focus:outline-none focus:border-accent-primary",o&&"border-error/50 focus:border-error","[&::-webkit-calendar-picker-indicator]:opacity-0","[&::-webkit-calendar-picker-indicator]:absolute","[&::-webkit-calendar-picker-indicator]:inset-0","[&::-webkit-calendar-picker-indicator]:w-full","[&::-webkit-calendar-picker-indicator]:h-full","[&::-webkit-calendar-picker-indicator]:cursor-pointer",c),onFocus:()=>m(!0),onBlur:()=>m(!1)})]}),(0,t.jsx)(a.AnimatePresence,{mode:"wait",children:o&&(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.2},className:"flex items-center gap-2 text-sm text-error",children:[(0,t.jsx)(n.AlertCircle,{className:"h-4 w-4"}),o]})})]})});function p({value:e,onChange:i,error:a}){return(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,t.jsx)(h,{label:"Date of birth",value:e,onChange:i,error:a}),(0,t.jsx)("p",{className:"mt-2 text-sm text-text-muted",children:"You must be at least 13 years old to use SupportIQ"})]})}h.displayName="DatePicker",e.s(["BirthdateField",()=>p],87226)},90042,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),a=e.i(53145),s=e.i(94814),n=e.i(50270),o=e.i(46932),d=e.i(70065),l=e.i(67881),c=e.i(25917),u=e.i(57296),h=e.i(87226),p=e.i(36993),m=e.i(18636),y=e.i(77847),b=e.i(54858);function x(){let e,x=(0,i.useRouter)(),{token:g,setStep:f,updateFormData:v,completeOnboarding:j,formData:C}=(0,p.useOnboardingStore)(),{config:w,isLoading:N}=(0,m.useAdminConfig)(),[S,k]=(0,r.useState)(!1),[M,A]=(0,r.useState)(null),F=w.page3,T=(e={},F.forEach(t=>{"aboutMe"===t?e.aboutMe=y.aboutMeSchema.shape.aboutMe:"address"===t?Object.assign(e,y.addressSchema.shape):"birthdate"===t&&(e.birthdate=y.birthdateSchema.shape.birthdate)}),n.z.object(e)),{register:O,handleSubmit:z,formState:{errors:P,isValid:B},watch:q,setValue:I}=(0,a.useForm)({resolver:(0,s.zodResolver)(T),mode:"onChange",defaultValues:{aboutMe:C.aboutMe||"",street:C.address?.street||"",city:C.address?.city||"",state:C.address?.state||"",zipCode:C.address?.zipCode||"",birthdate:C.birthdate||""}});(0,r.useEffect)(()=>{g||x.push("/")},[g,x]);let U=async e=>{if(g){k(!0),A(null);try{let t={};"aboutMe"in e&&(t.aboutMe=e.aboutMe),"street"in e&&(t.address={street:e.street,city:e.city,state:e.state,zipCode:e.zipCode}),"birthdate"in e&&(t.birthdate=e.birthdate),v(t),await b.api.updateProgress(g,{step:4,about_me:"aboutMe"in e?e.aboutMe:void 0,street_address:"street"in e?e.street:void 0,city:"city"in e?e.city:void 0,state:"state"in e?e.state:void 0,zip_code:"zipCode"in e?e.zipCode:void 0,birthdate:"birthdate"in e?e.birthdate:void 0}),await b.api.completeOnboarding(g),j(),x.push("/complete")}catch(e){A(e instanceof Error?e.message:"Failed to save progress")}finally{k(!1)}}};if(N)return(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"py-12",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-primary"})})})});let D=q("aboutMe"),R=q("birthdate");return(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{children:[(0,t.jsx)(d.CardTitle,{children:"Almost there!"}),(0,t.jsx)(d.CardDescription,{children:"Just a few more details to complete your profile"})]}),(0,t.jsxs)("form",{onSubmit:z(U),children:[(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)(o.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-6",children:[F.map(e=>"aboutMe"===e?(0,t.jsx)(c.AboutMeField,{register:O,errors:P,value:D},"aboutMe"):"address"===e?(0,t.jsx)(u.AddressFields,{register:O,errors:P},"address"):"birthdate"===e?(0,t.jsx)(h.BirthdateField,{value:R,onChange:e=>I("birthdate",e,{shouldValidate:!0}),error:P.birthdate?.message},"birthdate"):null),M&&(0,t.jsx)(o.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-error/10 border border-error/20 text-error text-sm",children:M})]})}),(0,t.jsxs)(d.CardFooter,{children:[(0,t.jsx)(l.Button,{type:"button",variant:"ghost",onClick:()=>{x.push("/step-2")},children:"Back"}),(0,t.jsx)(l.Button,{type:"submit",isLoading:S,disabled:!B,children:S?"Completing...":"Complete Setup"})]})]})]})}e.s(["default",()=>x])}]);